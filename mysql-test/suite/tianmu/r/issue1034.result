DROP DATABASE IF EXISTS issue1034_test;
CREATE DATABASE issue1034_test;
USE issue1034_test;
set global tianmu_index_search=on;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id int, name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
CREATE TABLE t1 (id int, name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=INPLACE;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY.
DROP TABLE t1;
set global tianmu_index_search=on;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id int, name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
CREATE TABLE t1 (id int, name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=INPLACE;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY.
DROP TABLE t1;
set global tianmu_index_search=on;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id int PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id int, name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
CREATE TABLE t1 (id int, name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=INPLACE;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY.
DROP TABLE t1;
set global tianmu_index_search=on;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255), name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255), name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id), ALGORITHM=INPLACE;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY.
DROP TABLE t1;
set global tianmu_index_search=on;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE USING BTREE, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255), name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255), name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING BTREE, ALGORITHM=INPLACE;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY.
DROP TABLE t1;
set global tianmu_index_search=on;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
set global tianmu_index_search=off;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (id VARCHAR(255) PRIMARY KEY) ENGINE=TIANMU;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH USING HASH, ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255), name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=DEFAULT;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=DEFAULT;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255), name VARCHAR(255), age int) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id,name), ALGORITHM=COPY;
ALTER TABLE t1 DROP PRIMARY KEY, ALGORITHM=COPY;
DROP TABLE t1;
CREATE TABLE t1 (id VARCHAR(255)) ENGINE=TIANMU;
ALTER TABLE t1 ADD PRIMARY KEY(id) USING HASH, ALGORITHM=INPLACE;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY.
DROP TABLE t1;
DROP DATABASE issue1034_test;
