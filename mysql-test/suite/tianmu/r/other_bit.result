#
# Test bit
#
DROP DATABASE IF EXISTS other_bit_test;
CREATE DATABASE other_bit_test;
USE other_bit_test;
CREATE TABLE bit_table(b BIT(11));
INSERT INTO bit_table VALUES (B'10');
INSERT INTO bit_table VALUES (B'00000000000');
INSERT INTO bit_table VALUES (B'11011000000');
INSERT INTO bit_table VALUES (B'01010101010');
INSERT INTO bit_table VALUES (B'101011111010');
ERROR 22001: Data too long for column 'b' at row 1
SELECT b+0 FROM bit_table;
b+0
2
0
1728
682
CREATE TABLE varbit_table(v BIT (11));
INSERT INTO varbit_table VALUES (B'');
INSERT INTO varbit_table VALUES (B'0');
INSERT INTO varbit_table VALUES (B'010101');
INSERT INTO varbit_table VALUES (B'01010101010');
INSERT INTO varbit_table VALUES (B'101011111010');
ERROR 22001: Data too long for column 'v' at row 1
SELECT v+0 FROM varbit_table;
v+0
0
0
21
682
SELECT v+0, b+0, (v || b) AS concat  FROM bit_table, varbit_table ORDER BY b,v;
v+0	b+0	concat
0	0	0
0	0	0
21	0	1
682	0	1
0	2	1
0	2	1
21	2	1
682	2	1
0	682	1
0	682	1
21	682	1
682	682	1
0	1728	1
0	1728	1
21	1728	1
682	1728	1
select B'001' & B'10';
B'001' & B'10'
0
select B'0111' | B'011';
B'0111' | B'011'
7
SELECT POSITION(B'1010' IN B'0000101');
POSITION(B'1010' IN B'0000101')
0
SELECT POSITION(B'1010' IN B'00001010');
POSITION(B'1010' IN B'00001010')
1
SELECT POSITION(B'1010' IN B'00000101');
POSITION(B'1010' IN B'00000101')
0
SELECT POSITION(B'1010' IN B'000001010');
POSITION(B'1010' IN B'000001010')
2
SELECT POSITION(B'' IN B'00001010');
POSITION(B'' IN B'00001010')
1
SELECT POSITION(B'0' IN B'');
POSITION(B'0' IN B'')
0
SELECT POSITION(B'' IN B'');
POSITION(B'' IN B'')
1
SELECT POSITION(B'101101' IN B'001011011011011000');
POSITION(B'101101' IN B'001011011011011000')
0
SELECT POSITION(B'10110110' IN B'001011011011010');
POSITION(B'10110110' IN B'001011011011010')
0
SELECT POSITION(B'1011011011011' IN B'001011011011011');
POSITION(B'1011011011011' IN B'001011011011011')
1
SELECT POSITION(B'1011011011011' IN B'00001011011011011');
POSITION(B'1011011011011' IN B'00001011011011011')
2
SELECT POSITION(B'11101011' IN B'11101011');
POSITION(B'11101011' IN B'11101011')
1
SELECT POSITION(B'11101011' IN B'011101011');
POSITION(B'11101011' IN B'011101011')
2
SELECT POSITION(B'11101011' IN B'00011101011');
POSITION(B'11101011' IN B'00011101011')
2
SELECT POSITION(B'11101011' IN B'0000011101011');
POSITION(B'11101011' IN B'0000011101011')
2
SELECT POSITION(B'111010110' IN B'111010110');
POSITION(B'111010110' IN B'111010110')
1
SELECT POSITION(B'111010110' IN B'0111010110');
POSITION(B'111010110' IN B'0111010110')
1
SELECT POSITION(B'111010110' IN B'000111010110');
POSITION(B'111010110' IN B'000111010110')
1
SELECT POSITION(B'111010110' IN B'00000111010110');
POSITION(B'111010110' IN B'00000111010110')
1
SELECT POSITION(B'111010110' IN B'11101011');
POSITION(B'111010110' IN B'11101011')
0
SELECT POSITION(B'111010110' IN B'011101011');
POSITION(B'111010110' IN B'011101011')
0
SELECT POSITION(B'111010110' IN B'00011101011');
POSITION(B'111010110' IN B'00011101011')
0
SELECT POSITION(B'111010110' IN B'0000011101011');
POSITION(B'111010110' IN B'0000011101011')
0
SELECT POSITION(B'111010110' IN B'111010110');
POSITION(B'111010110' IN B'111010110')
1
SELECT POSITION(B'111010110' IN B'0111010110');
POSITION(B'111010110' IN B'0111010110')
1
SELECT POSITION(B'111010110' IN B'000111010110');
POSITION(B'111010110' IN B'000111010110')
1
SELECT POSITION(B'111010110' IN B'00000111010110');
POSITION(B'111010110' IN B'00000111010110')
1
SELECT POSITION(B'111010110' IN B'000001110101111101011');
POSITION(B'111010110' IN B'000001110101111101011')
0
SELECT POSITION(B'111010110' IN B'0000001110101111101011');
POSITION(B'111010110' IN B'0000001110101111101011')
0
SELECT POSITION(B'111010110' IN B'000000001110101111101011');
POSITION(B'111010110' IN B'000000001110101111101011')
0
SELECT POSITION(B'111010110' IN B'00000000001110101111101011');
POSITION(B'111010110' IN B'00000000001110101111101011')
0
SELECT POSITION(B'111010110' IN B'0000011101011111010110');
POSITION(B'111010110' IN B'0000011101011111010110')
0
SELECT POSITION(B'111010110' IN B'00000011101011111010110');
POSITION(B'111010110' IN B'00000011101011111010110')
0
SELECT POSITION(B'111010110' IN B'0000000011101011111010110');
POSITION(B'111010110' IN B'0000000011101011111010110')
0
SELECT POSITION(B'111010110' IN B'000000000011101011111010110');
POSITION(B'111010110' IN B'000000000011101011111010110')
0
SELECT POSITION(B'000000000011101011111010110' IN B'000000000011101011111010110');
POSITION(B'000000000011101011111010110' IN B'000000000011101011111010110')
1
SELECT POSITION(B'00000000011101011111010110' IN B'000000000011101011111010110');
POSITION(B'00000000011101011111010110' IN B'000000000011101011111010110')
1
SELECT POSITION(B'0000000000011101011111010110' IN B'000000000011101011111010110');
POSITION(B'0000000000011101011111010110' IN B'000000000011101011111010110')
1
CREATE TABLE bit_shift_table(b BIT(16));
INSERT INTO bit_shift_table VALUES (B'1101100000000000');
INSERT INTO bit_shift_table SELECT b>>1 FROM bit_shift_table;
INSERT INTO bit_shift_table SELECT b>>2 FROM bit_shift_table;
INSERT INTO bit_shift_table SELECT b>>4 FROM bit_shift_table;
INSERT INTO bit_shift_table SELECT b>>8 FROM bit_shift_table;
SELECT b+0, b >> 1 AS bsr, b << 1 AS bsl
FROM bit_shift_table order by bsr;
b+0	bsr	bsl
1	0	2
3	1	6
6	3	12
13	6	26
27	13	54
54	27	108
108	54	216
216	108	432
432	216	864
864	432	1728
1728	864	3456
3456	1728	6912
6912	3456	13824
13824	6912	27648
27648	13824	55296
55296	27648	110592
SELECT b+0, b >> 8 AS bsr8, b << 8 AS bsl8
FROM bit_shift_table order by bsl8;
b+0	bsr8	bsl8
1	0	256
3	0	768
6	0	1536
13	0	3328
27	0	6912
54	0	13824
108	0	27648
216	0	55296
432	1	110592
864	3	221184
1728	6	442368
3456	13	884736
6912	27	1769472
13824	54	3538944
27648	108	7077888
55296	216	14155776
DROP TABLE bit_shift_table;
SELECT bit_count(B'0101011100');
bit_count(B'0101011100')
5
SELECT bit_count(B'1111111111');
bit_count(B'1111111111')
10
SELECT CAST(CAST(18446744073709551615 AS UNSIGNED) AS DECIMAL(32))<<0 AS c1;
c1
9223372036854775807
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615'
SELECT 18446744073709551615 ^ 1 AS c1;
c1
18446744073709551614
SELECT 18446744073709551615.0 ^ 1 AS c1;
c1
9223372036854775806
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT 18446744073709551615e0 ^ 1 AS c1;
c1
9223372036854775806
SELECT 18446744073709551615 & 18446744073709551615 AS c1;
c1
18446744073709551615
SELECT 18446744073709551615 & 18446744073709551615.0 AS c1;
c1
9223372036854775807
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT 18446744073709551615 & 18446744073709551615e0 AS c1;
c1
9223372036854775807
SELECT 18446744073709551615.0 & 18446744073709551615 AS c1;
c1
9223372036854775807
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT 18446744073709551615.0 & 18446744073709551615.0 AS c1;
c1
9223372036854775807
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT 18446744073709551615.0 & 18446744073709551615e0 AS c1;
c1
9223372036854775807
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT 18446744073709551615e0 & 18446744073709551615 AS c1;
c1
9223372036854775807
SELECT 18446744073709551615e0 & 18446744073709551615.0 AS c1;
c1
9223372036854775807
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT 18446744073709551615e0 & 18446744073709551615e0 AS c1;
c1
9223372036854775807
SELECT 0 | 18446744073709551615 AS c1;
c1
18446744073709551615
SELECT 0 | 18446744073709551615.0 AS c1;
c1
9223372036854775807
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT 0 | 18446744073709551615e0 AS c1;
c1
9223372036854775807
SELECT 18446744073709551615 | 0 AS c1;
c1
18446744073709551615
SELECT 18446744073709551615.0 | 0 AS c1;
c1
9223372036854775807
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT 18446744073709551615e0 | 0 AS c1;
c1
9223372036854775807
SELECT ~18446744073709551615 AS c1;
c1
0
SELECT ~18446744073709551615.0 AS c1;
c1
9223372036854775808
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT ~18446744073709551615e0 AS c1;
c1
9223372036854775808
SELECT BIT_COUNT(18446744073709551615) AS c1;
c1
64
SELECT BIT_COUNT(18446744073709551615.0) AS c1;
c1
63
Warnings:
Warning	1292	Truncated incorrect DECIMAL value: '18446744073709551615.0'
SELECT BIT_COUNT(18446744073709551615e0) AS c1;
c1
63
SELECT BIT_COUNT(-9223372036854775808) AS c1;
c1
1
SELECT BIT_COUNT(-9223372036854775808.0) AS c1;
c1
1
SELECT BIT_COUNT(-9223372036854775808e0) AS c1;
c1
1
drop database other_bit_test;
