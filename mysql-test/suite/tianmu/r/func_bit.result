#
# Test func bit
#
DROP DATABASE IF EXISTS func_bit;
CREATE DATABASE func_bit;
USE func_bit;
CREATE TABLE t1 (a DECIMAL(17,0) NOT NULL);
INSERT INTO t1 VALUES (999999999999999);
INSERT INTO t1 VALUES (28446744073709);
INSERT INTO t1 VALUES (-284467440737);
INSERT INTO t1 VALUES (-99999999999999);
SELECT a, a & a, a | a, a^0, a<<2, a<<0, a>>1, bit_count(a) FROM t1;
a	a & a	a | a	a^0	a<<2	a<<0	a>>1	bit_count(a)
999999999999999	999999999999999	999999999999999	999999999999999	3999999999999996	999999999999999	499999999999999	34
28446744073709	28446744073709	28446744073709	28446744073709	113786976294836	28446744073709	14223372036854	26
-284467440737	18446743789242110879	18446743789242110879	18446743789242110879	18446742935839788668	18446743789242110879	9223371894621055439	48
-99999999999999	18446644073709551617	18446644073709551617	18446644073709551617	18446344073709551620	18446644073709551617	9223322036854775808	35
DROP TABLE t1;
CREATE TABLE t1 (a DECIMAL(10,1) NOT NULL);
INSERT INTO t1 VALUES (999999999.9);
INSERT INTO t1 VALUES (3.5);
INSERT INTO t1 VALUES (3.4);
INSERT INTO t1 VALUES (2.9);
INSERT INTO t1 VALUES (-2.9);
INSERT INTO t1 VALUES (-3.4);
INSERT INTO t1 VALUES (-3.5);
INSERT INTO t1 VALUES (-999999999.9);
SELECT a, a & a, a | a, a^0, a<<2, a>>2, bit_count(a) FROM t1;
a	a & a	a | a	a^0	a<<2	a>>2	bit_count(a)
999999999.9	1000000000	1000000000	1000000000	4000000000	250000000	13
3.5	4	4	4	16	1	1
3.4	3	3	3	12	0	2
2.9	3	3	3	12	0	2
-2.9	18446744073709551613	18446744073709551613	18446744073709551613	18446744073709551604	4611686018427387903	63
-3.4	18446744073709551613	18446744073709551613	18446744073709551613	18446744073709551604	4611686018427387903	63
-3.5	18446744073709551612	18446744073709551612	18446744073709551612	18446744073709551600	4611686018427387903	62
-999999999.9	18446744072709551616	18446744072709551616	18446744072709551616	18446744069709551616	4611686018177387904	43
DROP TABLE t1;
CREATE TABLE t1 (a DECIMAL(10,0) NOT NULL);
INSERT INTO t1 VALUES (9999999999);
INSERT INTO t1 VALUES (3);
INSERT INTO t1 VALUES (-3);
INSERT INTO t1 VALUES (-9999999999);
SELECT a, a & a, a | a, a^0, a<<2, a<<0, a>>1, bit_count(a) FROM t1;
a	a & a	a | a	a^0	a<<2	a<<0	a>>1	bit_count(a)
9999999999	9999999999	9999999999	9999999999	39999999996	9999999999	4999999999	20
3	3	3	3	12	3	1	2
-3	18446744073709551613	18446744073709551613	18446744073709551613	18446744073709551604	18446744073709551613	9223372036854775806	63
-9999999999	18446744063709551617	18446744063709551617	18446744063709551617	18446744033709551620	18446744063709551617	9223372031854775808	45
DROP TABLE t1;
CREATE TABLE t1 (a VARCHAR(30) NOT NULL);
INSERT INTO t1 VALUES ('2.9');
INSERT INTO t1 VALUES ('18446744073709551610');
DROP TABLE t1;
CREATE TABLE t1 (a DOUBLE NOT NULL);
INSERT INTO t1 VALUES (2.9);
INSERT INTO t1 VALUES (10e30);
SELECT a, a & a, a | a, a^0, a<<2, a<<0, a>>1, bit_count(a) FROM t1;
a	a & a	a | a	a^0	a<<2	a<<0	a>>1	bit_count(a)
2.9	3	3	3	12	3	1	2
1e31	9223372036854775807	9223372036854775807	9223372036854775807	18446744073709551612	9223372036854775807	4611686018427387903	63
DROP TABLE t1;
CREATE TABLE t1 (a TIME(1) NOT NULL);
INSERT INTO t1 VALUES ('00:00:02.9');
INSERT INTO t1 VALUES ('800:00:02.9');
INSERT INTO t1 VALUES ('800:00:02');
INSERT INTO t1 VALUES ('-800:00:02.9');
DROP TABLE t1;
CREATE TABLE t1 (a DATETIME(1) NOT NULL);
INSERT INTO t1 VALUES ('2001-01-01 00:00:02.9');
INSERT INTO t1 VALUES ('2001-01-01 23:59:59.9');
INSERT INTO t1 VALUES ('9999-12-31 23:59:59.9');
DROP TABLE t1;
CREATE TABLE t1 (a INT NOT NULL);
INSERT INTO t1 VALUES (63),(64),(65);
SELECT a, 1<<a,1>>a FROM t1;
a	1<<a	1>>a
63	9223372036854775808	0
64	0	0
65	0	0
DROP TABLE t1;
CREATE TABLE t1 (a DECIMAL(18,2));
INSERT INTO t1 VALUES (3.4);
SELECT a, a|4, a&4 FROM t1;
a	a|4	a&4
3.40	7	0
SELECT * FROM t1 WHERE (a|4) <> a;
a
3.40
SELECT * FROM t1 WHERE (a&4) <> a;
a
3.40
DROP TABLE t1;
DROP DATABASE func_bit;
